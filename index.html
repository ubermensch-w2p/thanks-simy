<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For Simy</title>

  <style>
    :root{
      --bg1:#0b0b12;
      --bg2:#121225;
      --card:#151529cc;
      --border:#ffffff14;
      --text:#f6f6fb;
      --muted:#b9b9d2;
      --accent1:#ff4d6d;
      --accent2:#ff7aa2;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 15% 20%, rgba(255,77,109,.14), transparent 55%),
        radial-gradient(1000px 700px at 85% 70%, rgba(255,122,162,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding:22px;
    }

    .card{
      width:min(720px, 94vw);
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px 18px;
      backdrop-filter: blur(10px);
      position:relative;
      overflow:hidden;
    }

    .glow{
      position:absolute;
      inset:-60px;
      background:
        radial-gradient(circle at 30% 20%, rgba(255,77,109,.18), transparent 45%),
        radial-gradient(circle at 70% 80%, rgba(255,122,162,.14), transparent 45%);
      filter: blur(18px);
      pointer-events:none;
    }

    header{
      text-align:center;
      padding: 6px 4px 10px;
    }

    h1{
      margin:0 0 6px;
      font-size: clamp(22px, 4vw, 34px);
      letter-spacing: -0.02em;
    }

    .sub{
      margin:0;
      color: rgba(185,185,210,.88);
      line-height:1.5;
      font-size: clamp(14px, 2.4vw, 16px);
      white-space: pre-line;
    }

    /* Flower photo */
    .art{
      margin: 14px auto 0;
      width: min(640px, 92vw);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      overflow:hidden;
      box-shadow: 0 16px 50px rgba(0,0,0,.22);
      position:relative;
    }

    .photo{
      width:100%;
      aspect-ratio: 16 / 10;
      background-size: cover;
      background-position: center;
      position:relative;
    }

    .photo::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(
        180deg,
        rgba(0,0,0,.08),
        rgba(0,0,0,.02) 45%,
        rgba(0,0,0,.22)
      );
      pointer-events:none;
    }

    /* Confession area */
    .note{
      margin-top: 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      padding: 16px 14px;
    }

    .label{
      font-size: 12px;
      color: rgba(185,185,210,.65);
      margin-bottom: 8px;
    }

    .line{
      font-size: clamp(15px, 2.8vw, 17px);
      line-height: 1.6;
      color: rgba(246,246,251,.95);
      white-space: pre-line;
      min-height: 74px;
    }

    .fadeIn{
      animation: fadeIn .28s ease;
    }
    @keyframes fadeIn{
      from{ opacity:0; transform: translateY(4px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .controls{
      margin-top: 14px;
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
    }

    button{
      appearance:none;
      border:0;
      outline:0;
      cursor:pointer;
      font-weight:800;
      border-radius: 999px;
      padding: 14px 18px;
      min-width: 180px;
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    button:active{ transform: scale(.98); }

    .primary{
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      color: #16030b;
      box-shadow: 0 16px 40px rgba(255,77,109,.16);
    }

    .secondary{
      background: rgba(255,255,255,.06);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.12);
      min-width: 140px;
    }

    .hint{
      margin-top: 10px;
      text-align:center;
      color: rgba(185,185,210,.78);
      font-size: 13px;
      min-height: 18px;
    }

    /* subtle petals */
    .petal{
      position:fixed;
      left:0;
      top:0;
      width: 10px;
      height: 10px;
      border-radius: 999px 999px 999px 0;
      transform: translate(-50%, -50%) rotate(25deg);
      background: rgba(255,122,162,.85);
      pointer-events:none;
      z-index:60;
      animation: floatUp linear forwards;
      opacity:.9;
    }

    @keyframes floatUp{
      0%{
        opacity: 0;
        transform: translate(var(--x), var(--y)) rotate(25deg) scale(.9);
      }
      10%{ opacity: .95; }
      100%{
        opacity: 0;
        transform: translate(calc(var(--x) + var(--dx)), calc(var(--y) - var(--dy)))
                   rotate(85deg) scale(1.15);
      }
    }

    @media (max-width: 420px){
      button{ min-width: 165px; }
    }

    /* ----------------------------
       LOADING OVERLAY
    ---------------------------- */
    .loading{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      z-index:100;
    }

    .loadingInner{
      width:min(420px, 86vw);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding: 18px 16px;
      text-align:center;
      box-shadow: 0 16px 60px rgba(0,0,0,.30);
    }

    .spinner{
      width: 46px;
      height: 46px;
      border-radius: 999px;
      border: 4px solid rgba(255,255,255,.12);
      border-top-color: rgba(255,122,162,.85);
      margin: 0 auto 12px;
      animation: spin 0.9s linear infinite;
    }

    @keyframes spin{
      to { transform: rotate(360deg); }
    }

    .loadingTitle{
      font-weight: 800;
      margin: 0 0 6px;
      letter-spacing: -0.01em;
    }

    .loadingText{
      margin:0;
      color: rgba(185,185,210,.88);
      font-size: 14px;
      line-height: 1.4;
    }

    .progressWrap{
      margin-top: 14px;
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.10);
    }

    .progressBar{
      height:100%;
      width:0%;
      background: linear-gradient(135deg, var(--accent1), var(--accent2));
      border-radius: 999px;
      transition: width .18s ease;
    }

    .progressMeta{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(185,185,210,.75);
    }

    .hidden{ display:none !important; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div class="glow"></div>

      <!-- Loading overlay -->
      <div class="loading" id="loading">
        <div class="loadingInner">
          <div class="spinner"></div>
          <p class="loadingTitle">Preparing your bloomsâ€¦</p>
          <p class="loadingText">Just a second ðŸŒ¸</p>

          <div class="progressWrap" aria-label="Loading progress">
            <div class="progressBar" id="progressBar"></div>
          </div>
          <div class="progressMeta" id="progressMeta">0 / 0</div>
        </div>
      </div>

      <header>
        <h1>Simy</h1>
        <p class="sub" id="sub">I wanted to tell you something.\n(Just tap.)</p>
      </header>

      <section class="art" aria-label="Flowers">
        <!-- Badge removed -->
        <div class="photo" id="photo"></div>
      </section>

      <section class="note">
        <div class="label" id="label">A small confession</div>
        <div class="line" id="line">Tap once ðŸ™‚</div>
      </section>

      <div class="controls">
        <button class="primary" id="tapBtn">Tap âœ¨</button>
        <button class="secondary" id="restartBtn" style="display:none;">Restart</button>
      </div>

      <div class="hint" id="hint">No pressure. Just honest.</div>
    </div>
  </div>

  <script>
    const tapBtn = document.getElementById("tapBtn");
    const restartBtn = document.getElementById("restartBtn");
    const lineEl = document.getElementById("line");
    const hintEl = document.getElementById("hint");
    const labelEl = document.getElementById("label");
    const subEl = document.getElementById("sub");
    const photoEl = document.getElementById("photo");

    const loadingEl = document.getElementById("loading");
    const progressBarEl = document.getElementById("progressBar");
    const progressMetaEl = document.getElementById("progressMeta");

    // Confession flow
    const lines = [
      "I like talking to you.",
      "Somehowâ€¦ you kindle the inner kid in me.",
      "Talking to you genuinely makes me happy.",
      "And thinking about the day we met still leaves a smile on my face.",
      "Alsoâ€¦ youâ€™re kind of my Khaleesi.\n(But the soft, calming kind ðŸ˜„)",
      "You have a calm, gentle presence.\nAnd Iâ€™ve missed that in my life.",
      "Thank you for the flowers, the pistachio sweets, and the perfume.\n\nBut more than the giftsâ€¦\nthank you for your time.\n\nHope to meet you soon.\n(And yesâ€¦ we should plan our secret rendezvous ðŸ˜„)\n\nâ€” Hemant"
    ];

    // Locks
    const COVER_LOCK = 235;
    const LIKED_LOCKS = [1, 6, 39, 89, 123, 79, 91];

    let step = 0;

    function coverUrl(){
      return `https://loremflickr.com/1100/780/flower?lock=${COVER_LOCK}`;
    }

    function flowerUrlForStep(i){
      const lock = LIKED_LOCKS[i % LIKED_LOCKS.length];
      return `https://loremflickr.com/1100/780/flower?lock=${lock}`;
    }

    // ---------- Petals ----------
    function sprinklePetals(count = 10){
      const w = window.innerWidth;
      const h = window.innerHeight;

      for (let i=0; i<count; i++){
        const p = document.createElement("div");
        p.className = "petal";

        const startX = w * (0.30 + Math.random() * 0.40);
        const startY = h * (0.62 + Math.random() * 0.12);

        const dx = (Math.random() - 0.5) * 220;
        const dy = 220 + Math.random() * 520;

        const duration = 1100 + Math.random() * 900;

        p.style.setProperty("--x", startX + "px");
        p.style.setProperty("--y", startY + "px");
        p.style.setProperty("--dx", dx + "px");
        p.style.setProperty("--dy", dy + "px");
        p.style.animationDuration = duration + "ms";

        const s = 8 + Math.random() * 10;
        p.style.width = s + "px";
        p.style.height = s + "px";

        document.body.appendChild(p);
        setTimeout(() => p.remove(), duration + 60);
      }
    }

    // ---------- UI ----------
    function setCover(){
      const url = coverUrl();

      photoEl.classList.remove("fadeIn");
      void photoEl.getBoundingClientRect();
      photoEl.style.backgroundImage = `url('${url}')`;
      photoEl.classList.add("fadeIn");
    }

    function setPhotoForConfession(i){
      const url = flowerUrlForStep(i);

      photoEl.classList.remove("fadeIn");
      void photoEl.getBoundingClientRect();
      photoEl.style.backgroundImage = `url('${url}')`;
      photoEl.classList.add("fadeIn");
    }

    function setLine(text){
      lineEl.classList.remove("fadeIn");
      void lineEl.getBoundingClientRect();
      lineEl.textContent = text;
      lineEl.classList.add("fadeIn");
    }

    // ---------- Preloading with progress ----------
    function preloadImage(url){
      return new Promise((resolve) => {
        const img = new Image();
        img.decoding = "async";
        img.loading = "eager";

        img.onload = () => resolve({ url, ok: true });
        img.onerror = () => resolve({ url, ok: false });

        img.src = url;
      });
    }

    async function preloadAllImages(){
      const urls = [coverUrl()];
      for (let i = 0; i < lines.length; i++){
        urls.push(flowerUrlForStep(i));
      }

      const total = urls.length;
      let done = 0;

      progressMetaEl.textContent = `${done} / ${total}`;
      progressBarEl.style.width = "0%";

      for (const url of urls){
        await preloadImage(url);
        done++;

        const pct = Math.round((done / total) * 100);
        progressMetaEl.textContent = `${done} / ${total}`;
        progressBarEl.style.width = `${pct}%`;
      }
    }

    function showLoading(){
      loadingEl.classList.remove("hidden");
      tapBtn.disabled = true;
      restartBtn.disabled = true;
    }

    function hideLoading(){
      loadingEl.classList.add("hidden");
      tapBtn.disabled = false;
      restartBtn.disabled = false;
    }

    // ---------- Flow ----------
    function reset(){
      step = 0;
      setCover();
      setLine("Tap once ðŸ™‚");

      hintEl.textContent = "No pressure. Just honest.";
      labelEl.textContent = "A small confession";
      subEl.textContent = "I wanted to tell you something.\n(Just tap.)";

      tapBtn.textContent = "Tap âœ¨";
      tapBtn.style.display = "inline-block";
      restartBtn.style.display = "none";
    }

    function next(){
      if (step >= lines.length) return;

      setPhotoForConfession(step);
      setLine(lines[step]);

      if (step === 0) hintEl.textContent = "Okayâ€¦ first one ðŸ™‚";
      if (step === 3) hintEl.textContent = "This is the part I mean.";
      if (step === 4) hintEl.textContent = "I had to say it ðŸ˜„";

      if (step === lines.length - 1) {
        labelEl.textContent = "Thank you";
        hintEl.textContent = "Thatâ€™s all. Just wanted you to know.";
        tapBtn.style.display = "none";
        restartBtn.style.display = "inline-block";
        subEl.textContent = "A small page. A real message.";
        sprinklePetals(18);
      } else {
        tapBtn.textContent = "Tap again";
        sprinklePetals(10);
      }

      step++;
    }

    tapBtn.addEventListener("click", next);
    restartBtn.addEventListener("click", async () => {
      showLoading();
      await preloadAllImages();
      hideLoading();
      reset();
    });

    // ---------- Start ----------
    (async function init(){
      showLoading();
      await preloadAllImages();
      hideLoading();
      reset();
    })();
  </script>
</body>
</html>
